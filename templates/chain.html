<!DOCTYPE html>

<html lang="en">
    <head>
        <meta name="charset" content="UTF-8">
        <meta name="keywords" content="Finance,Options,Profit,Loss,Chart,Graph">
        <meta name="author" content="Joseph Zhong">
        <title>Options PnL Graph</title>
        <link type="text/css" rel="stylesheet" href={{ url_for('static', filename='mdl/material.min.css')}}>
        <script src={{ url_for('static', filename='mdl/material.min.js')}}></script>
        <script src={{ url_for('static', filename='node_modules/chart.js/Chart.min.js')}}></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <body>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
            <header class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <span class="mdl-layout-title">OptPlot</span>
                    <div class="mdl-layout-spacer"></div>
                    <form method="post" action={{ url_for('getChain') }}>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
                            <label class="mdl-button mdl-js-button mdl-button--icon" for="symbolEntry">
                                <i class="material-icons">search</i>
                            </label>
                            <div class="mdl-textfield__expandable-holder">
                                <input class="mdl-textfield__input" type="text" name="symbol" id="symbolEntry"/>
                                <label class="mdl-textfield__label" for="symbolEntry">Symbol</label>
                            </div>
                        </div>
                    </form>
                </div>
            </header>
            <main class="mdl-layout__content">
                <div class="mdl-page">
                    <div class="mdl-grid">
                        <div class="mdl-cell mdl-cell--top mdl-cell--12-col">
                            <canvas id="myChart"></canvas>
                            <script>
                                var randomScalingFactor = function(){return Math.round(Math.random()*100)};
                                var lineChartData = {
                                    labels : ["January", "February", "March", "April", "May"],
                                    datasets : [
                                                {
                                                    label: "My First Dataset",
                                                    fillColor: "rgba(220,220,220,0.2)",
                                                    strokeColor: "rgba(220,220,220,1)",
                                                    pointColor: "rgba(220,220,220,1)",
                                                    pointStrokeColor: "#fff",
                                                    pointHighlightFill: "#fff",
                                                    pointHighlightStroke: "rgba(220,220,220,1)",
                                                    data: [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
                                                },
                                                {
                                                    label: "My Second Dataset",
                                                    fillColor: "rgba(151,187,205,0.2)",
                                                    strokeColor: "rgba(151,187,205,1)",
                                                    pointColor: "rgba(151,187,205,1)",
                                                    pointStrokeColor: "#fff",
                                                    pointHighlightFill: "#fff",
                                                    pointHighlightStroke: "rgba(151,187,205,1)",
                                                    data: [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
                                                }
                                    ]
                                }
                                window.onload = function(){
                                    var ctx = document.getElementById("myChart").getContext("2d");
                                    window.myLine = new Chart(ctx).Line(lineChartData,{
                                        bezierCurve: false,
                                        responsive: true
                                    });
                                }
                            </script>
                        </div>
                    </div>
                    <div class="mdl-grid">
                        <table class="mdl-cell mdl-cell--6-col mdl-data-table mdl-js-data-table mdl-shadow--2dp">
                            <thead>
                                <tr>
                                    <th class="mdl-data-table__cell--non-numeric">Call</th>
                                    <th>Strike</th>
                                    <th>Last</th>
                                    <th>Bid</th>
                                    <th>Ask</th>
                                    <th style="text-align:center;">Sell</th>
                                    <th style="text-align:center;">Qty</th>
                                    <th style="text-align:center;">Buy</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for call in callChain %}
                                <tr>
                                    <td class="mdl-data-table__cell--non-numeric">{{call['symbol']}}</td>
                                    <td>{{call['strike']}}</td>
                                    <td>{{call['last']}}</td>
                                    <td>{{call['bid']}}</td>
                                    <td>{{call['ask']}}</td>
                                    <td style="text-align:center; vertical-align:middle; padding-top: 0px;">
                                        <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--colored">
                                            <i class="material-icons mdl-color-text--red">remove_circle_outline</i>
                                        </button>
                                    </td>
                                    <td style="text-align:center;">0</td>
                                    <td style="text-align:center; vertical-align:middle; padding-top: 0px;">
                                        <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--colored">
                                            <i class="material-icons mdl-color-text--cyan">add_circle_outline</i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <table class="mdl-cell mdl-cell--6-col mdl-data-table mdl-js-data-table mdl-shadow--2dp">
                            <thead>
                                <tr>
                                    <th class="mdl-data-table__cell--non-numeric">Put</th>
                                    <th>Strike</th>
                                    <th>Last</th>
                                    <th>Bid</th>
                                    <th>Ask</th>
                                    <th style="text-align:center;">Sell</th>
                                    <th style="text-align:center;">Qty</th>
                                    <th style="text-align:center;">Buy</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for put in putsChain %}
                                <tr>
                                    <td class="mdl-data-table__cell--non-numeric">{{put['symbol']}}</td>
                                    <td>{{put['strike']}}</td>
                                    <td>{{put['last']}}</td>
                                    <td>{{put['bid']}}</td>
                                    <td>{{put['ask']}}</td>
                                    <td style="text-align:center; vertical-align:middle; padding-top: 0px;">
                                        <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--colored">
                                            <i class="material-icons mdl-color-text--red">remove_circle_outline</i>
                                        </button>
                                    </td>
                                    <td style="text-align:center;">0</td>
                                    <td style="text-align:center; vertical-align:middle; padding-top: 0px;">
                                        <button class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--colored">
                                            <i class="material-icons mdl-color-text--cyan">add_circle_outline</i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </body>
</html>
